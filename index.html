<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactive Stacked Timelines</title>
  <style>
    :root {
      --primary-color-1: #1B998B;
      --primary-color-2: #E63946;
      --primary-color-3: #457B9D;
      --primary-color-4: #F4A261;
      --secondary-color: #f9f9f9;
      --popup-bg: white;
      --popup-border: #ddd;
      --text-color: #333;
      --hover-shadow: rgba(0, 0, 0, 0.2);
      /* Define colors for each persona */
      --staff-color: #1B998B;
      --people-leader-color: #E63946;
      --project-leader-color: #457B9D;
      --business-leader-color: #F4A261;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      display: flex;
      flex-direction: row;
      height: 100vh;
      background-color: var(--secondary-color);
    }

    .filter-buttons {
      display: flex;
      flex-direction: column;
      gap: 15px;
      align-items: center; /* Center buttons horizontally */
      justify-content: center; /* Center buttons vertically */
      padding: 20px;
      background-color: var(--secondary-color);
      border-right: 1px solid var(--popup-border);
      box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);
      height: 100vh; /* Make it span the full viewport height */
    }


    .filter-btn {
      width: 60px;
      height: 60px;
      border: none;
      border-radius: 50%;
      background-size: cover;
      background-position: center;
      cursor: pointer;
      transition: transform 0.2s ease, border 0.2s ease, box-shadow 0.2s ease;
    }

    .timeline-section {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 20px;
      gap: 40px; /* Space between timelines */
      overflow-y: auto;
    }

    .timeline-container {
      display: grid;
      grid-template-columns: repeat(8, 1fr); /* Ensure 8 nodes fit horizontally */
      gap: 20px;
      align-items: center;
      background-color: var(--secondary-color);
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      padding: 20px;
    }

    .timeline-container.main {
      background-color: #f0f0f0;
    }

    .timeline-container.expanded {
      /* border: 1px solid var(--primary-color-3); */
      background-color: white;
    }

    .timeline-container.collapsed {
      display: none;
    }

    .timeline-step {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .timeline-step .circle {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: var(--primary-color-1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: bold;
      color: white;
      box-shadow: 0 2px 4px var(--hover-shadow);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .timeline-step:hover .circle {
      transform: scale(1.1);
      box-shadow: 0 4px 8px var(--hover-shadow);
    }

    .overlay {
      width: 300px;
      background-color: var(--popup-bg);
      border-left: 1px solid var(--popup-border);
      padding: 20px;
      box-shadow: -2px 0 8px rgba(0, 0, 0, 0.1);
      display: flex;
      flex-direction: column;
      overflow-y: auto;
    }

    .close-btn {
      font-size: 20px;
      cursor: pointer;
      margin-bottom: 20px;
      align-self: flex-end;
    }

    .timeline-popup-above,
    .timeline-popup-below {
      display: none; /* Hide inline popups */
    }

    .filter-btn[data-target="staff"].active {
      border: 2px solid var(--staff-color); /* Match staff color */
    }

    .filter-btn[data-target="peopleleader"].active {
      border: 2px solid var(--people-leader-color); /* Match people leader color */
    }

    .filter-btn[data-target="projectleader"].active {
      border: 2px solid var(--project-leader-color); /* Match project leader color */
    }

    .filter-btn[data-target="businessleader"].active {
      border: 2px solid var(--business-leader-color); /* Match business leader color */
    }


    /* Node styles with persona colors */
    .timeline-container[data-persona="staff"] .circle {
      background-color: var(--staff-color);
    }

    .timeline-container[data-persona="peopleleader"] .circle {
      background-color: var(--people-leader-color);
    }

    .timeline-container[data-persona="projectleader"] .circle {
      background-color: var(--project-leader-color);
    }

    .timeline-container[data-persona="businessleader"] .circle {
      background-color: var(--business-leader-color);
    }
  </style>
</head>

<body>
  <div class="filter-buttons">
    <button class="filter-btn" style="background-image: url('staff.jpg');" data-target="staff"></button>
    <button class="filter-btn" style="background-image: url('gl.jpg');" data-target="peopleleader"></button>
    <button class="filter-btn" style="background-image: url('pl.jpg');" data-target="projectleader"></button>
    <button class="filter-btn" style="background-image: url('bl.jpg');" data-target="businessleader"></button>
  </div>
  <div class="timeline-section">
    <center><h3>Project Timeline (Pre-Award to Project Close)</h3></center>
    <!-- Main Timeline -->
    <div class="timeline-container main">
    </div>
    <!-- Dynamic timelines for personas -->
    <div class="timeline-container collapsed" data-persona="staff">
    </div>
    <div class="timeline-container collapsed" data-persona="peopleleader">
    </div>
    <div class="timeline-container collapsed" data-persona="projectleader">
    </div>
    <div class="timeline-container collapsed" data-persona="businessleader">
    </div>
  </div>

  <div class="overlay" id="overlay">
    <div class="close-btn" onclick="closeOverlay()">Ã—</div>
    <div id="overlay-text">Details</div>
  </div>

  <script>
    // Generate Main Timeline Steps
    function generateMainTimelineSteps() {
      return titles
        .map(
          (title, index) => `
            <div class="timeline-step" data-step="${index + 1}">
              <div class="circle">${index < 3 ? `1.${index + 1}` : `2.${index - 2}`}</div>
              <div class="timeline-popup-above">${title}</div>
            </div>`
        )
        .join('');
    }
  
    // Generate Expanded Timeline Steps
    function generateTimelineSteps(persona) {
      const popupData = popupBelowData[persona.toLowerCase().replace(/ /g, '')];
      if (!popupData) return '';
  
      return popupData
        .map(
          (text, index) => `
            <div class="timeline-step" data-step="${index + 1}">
              <div class="circle">${index < 3 ? `1.${index + 1}` : `2.${index - 2}`}</div>
              <div class="timeline-popup-above">${titles[index] || 'Title not available'}</div>
              <div class="timeline-popup-below" data-full-text="${text}">${text.split('.')[0]}.</div>
            </div>`
        )
        .join('');
    }
  
    // Assign Main Timeline Steps
    document.addEventListener('DOMContentLoaded', () => {
      const mainTimeline = document.querySelector('.timeline-container.main');
      if (mainTimeline) {
        mainTimeline.innerHTML += generateMainTimelineSteps();
      }
  
      document.querySelectorAll('.timeline-container.collapsed').forEach(container => {
        const persona = container.getAttribute('data-persona');
        if (persona) {
          container.innerHTML = generateTimelineSteps(persona);
        }
      });
    });
  
    // Filter Button Logic
    document.querySelectorAll('.filter-btn').forEach(button => {
      button.addEventListener('click', () => {
        const target = button.getAttribute('data-target');
        const timelines = document.querySelectorAll('.timeline-container');
  
        button.classList.toggle('active');
        const isActive = button.classList.contains('active');
  
        // Toggle active state for the button
        // button.style.border = isActive ? '2px solid var(--primary-color-3)' : 'none';
  
        timelines.forEach(timeline => {
          const persona = timeline.getAttribute('data-persona');
          if (persona && persona.includes(target)) {
            timeline.style.display = isActive ? 'grid' : 'none';
          }
        });
      });
    });
  
    // Expand Main Timeline
    document.querySelector('.timeline-container.main').addEventListener('click', () => {
      document.querySelectorAll('.timeline-container.collapsed').forEach(timeline => {
        timeline.classList.toggle('expanded');
        timeline.classList.toggle('collapsed');
        timeline.style.display = timeline.classList.contains('expanded') ? 'grid' : 'none';
      });
    });
  
    // Overlay Logic
    document.addEventListener('click', e => {
      const timelineStep = e.target.closest('.timeline-step');
      if (timelineStep) {
        const overlay = document.getElementById('overlay');
        const overlayText = document.getElementById('overlay-text');
        const popupAbove = timelineStep.querySelector('.timeline-popup-above')?.textContent || '';
        const fullPopupBelow = timelineStep.querySelector('.timeline-popup-below')?.dataset.fullText || '';
  
        overlayText.innerHTML = `<h3>${popupAbove}</h3><p>${fullPopupBelow}</p>`;
        overlay.style.display = 'flex';
      }
    });
  
    // Close Overlay
    function closeOverlay() {
      document.getElementById('overlay').style.display = 'none';
    }
  
    // Hover Effect for Popups
    document.addEventListener('mouseover', e => {
      const timelineStep = e.target.closest('.timeline-step');
      if (timelineStep) {
        const popupAbove = timelineStep.querySelector('.timeline-popup-above');
        const popupBelow = timelineStep.querySelector('.timeline-popup-below');
  
        if (popupAbove) {
          popupAbove.style.opacity = '1';
          popupAbove.style.visibility = 'visible';
        }
        if (popupBelow) {
          popupBelow.style.opacity = '1';
          popupBelow.style.visibility = 'visible';
        }
      }
    });
  
    document.addEventListener('mouseout', e => {
      const timelineStep = e.target.closest('.timeline-step');
      if (timelineStep) {
        const popupAbove = timelineStep.querySelector('.timeline-popup-above');
        const popupBelow = timelineStep.querySelector('.timeline-popup-below');
  
        if (popupAbove) {
          popupAbove.style.opacity = '0';
          popupAbove.style.visibility = 'hidden';
        }
        if (popupBelow) {
          popupBelow.style.opacity = '0';
          popupBelow.style.visibility = 'hidden';
        }
      }
    });
  
    // Data for Timeline Steps
    const popupBelowData = {
      staff: [
        "Staff should update skills and be proactive in identifying projects.",
        "Staff require support from leaders to identify opportunities.",
        "Staff need clear communication with Project Leaders.",
        "Staff must understand their roles when held to a project.",
        "Staff should know their time allocation for a project.",
        "Staff should request performance feedback.",
        "Staff should request advance notice for project close-out.",
        "Staff should deliver on commitments before project close-out."
      ],
      peopleleader: [
        "People Leaders request labor details from Project Leaders.",
        "People Leaders assist staff in finding growth opportunities.",
        "People Leaders provide insights into staff skills.",
        "People Leaders request updates on project changes.",
        "People Leaders request feedback on staff performance.",
        "People Leaders manage coverage across projects.",
        "People Leaders support project close-out.",
        "People Leaders assist staff transitioning to new projects."
      ],
      projectleader: [
        "Project Leaders request project details from managers.",
        "Project Leaders collaborate on budgets and resources.",
        "Project Leaders define roles and assign staff.",
        "Project Leaders track financial updates.",
        "Project Leaders communicate scope changes.",
        "Project Leaders request performance reports.",
        "Project Leaders ensure project close-out.",
        "Project Leaders notify close-out timelines."
      ],
      businessleader: [
        "Business Leaders collaborate on staff planning.",
        "Business Leaders request pricing details.",
        "Business Leaders add project codes.",
        "Business Leaders request status updates.",
        "Business Leaders guide on execution (e.g., burn rates).",
        "Business Leaders track allocation changes.",
        "Business Leaders request trailing cost details.",
        "Business Leaders ensure project requirement completion."
      ]
    };
  
    const titles = [
      "1.1 Identify Opportunity",
      "1.2 Mature Opportunity to High Confidence",
      "1.3 Manage High Confidence Opportunity",
      "2.1 Launch Project",
      "2.2 Manage Project",
      "2.3 Report Progress",
      "2.4 Deliver Results",
      "2.5 Close Project"
    ];
  </script>
   
  
</body>
</html>